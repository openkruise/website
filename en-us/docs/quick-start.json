{
  "filename": "quick-start.md",
  "__html": "<h2>Getting started</h2>\n<h3>Install with YAML files</h3>\n<h5>Install CRDs</h5>\n<pre><code>kubectl apply -f https://raw.githubusercontent.com/kruiseio/kruise/master/config/crds/apps_v1alpha1_broadcastjob.yaml\nkubectl apply -f https://raw.githubusercontent.com/kruiseio/kruise/master/config/crds/apps_v1alpha1_sidecarset.yaml\nkubectl apply -f https://raw.githubusercontent.com/kruiseio/kruise/master/config/crds/apps_v1alpha1_statefulset.yaml\n</code></pre>\n<p>Note that ALL three CRDs need to be installed for kruise-controller to run properly.</p>\n<h5>Install kruise-controller-manager</h5>\n<p><code>kubectl apply -f https://raw.githubusercontent.com/kruiseio/kruise/master/config/manager/all_in_one.yaml</code></p>\n<p>Or run from the repo root directory:</p>\n<p><code>kustomize build config/default | kubectl apply -f -</code></p>\n<p>To Install Kustomize, check kustomize <a href=\"https://github.com/kubernetes-sigs/kustomize\">website</a>.</p>\n<p>Note that use Kustomize 1.0.11. Version 2.0.3 has compatibility issues with kube-builder</p>\n<p>The official kruise-controller-manager image is hosted under <a href=\"https://hub.docker.com/r/openkruise/kruise-manager\">docker hub</a>.</p>\n<h2>Usage examples</h2>\n<h3>Advanced StatefulSet</h3>\n<pre><code class=\"language-yaml\"><span class=\"hljs-attr\">apiVersion:</span> <span class=\"hljs-string\">apps.kruise.io/v1alpha1</span>\n<span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">StatefulSet</span>\n<span class=\"hljs-attr\">metadata:</span>\n  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">sample</span>\n<span class=\"hljs-attr\">spec:</span>\n  <span class=\"hljs-attr\">replicas:</span> <span class=\"hljs-number\">3</span>\n  <span class=\"hljs-attr\">serviceName:</span> <span class=\"hljs-string\">fake-service</span>\n  <span class=\"hljs-attr\">selector:</span>\n    <span class=\"hljs-attr\">matchLabels:</span>\n      <span class=\"hljs-attr\">app:</span> <span class=\"hljs-string\">sample</span>\n  <span class=\"hljs-attr\">template:</span>\n    <span class=\"hljs-attr\">metadata:</span>\n      <span class=\"hljs-attr\">labels:</span>\n        <span class=\"hljs-attr\">app:</span> <span class=\"hljs-string\">sample</span>\n    <span class=\"hljs-attr\">spec:</span>\n      <span class=\"hljs-attr\">readinessGates:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">conditionType:</span> <span class=\"hljs-string\">InPlaceUpdateReady</span> <span class=\"hljs-comment\"># A new condition that ensures the pod reamin at NotReady state while the in-place update is happening</span>\n      <span class=\"hljs-attr\">containers:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">main</span>\n        <span class=\"hljs-attr\">image:</span> <span class=\"hljs-string\">nginx:alpine</span>\n  <span class=\"hljs-attr\">updateStrategy:</span>\n    <span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">RollingUpdate</span>\n    <span class=\"hljs-attr\">rollingUpdate:</span>\n      <span class=\"hljs-attr\">podUpdatePolicy:</span> <span class=\"hljs-string\">InPlaceIfPossible</span>\n</code></pre>\n<h3>Broadcast Job</h3>\n<p>Run a BroadcastJob that each Pod computes pi, with <code>ttlSecondsAfterFinished</code> set to 30. The job\nwill be deleted in 30 seconds after the job is finished.</p>\n<pre><code class=\"language-yaml\"><span class=\"hljs-attr\">apiVersion:</span> <span class=\"hljs-string\">apps.kruise.io/v1alpha1</span>\n<span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">BroadcastJob</span>\n<span class=\"hljs-attr\">metadata:</span>\n  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">broadcastjob-ttl</span>\n<span class=\"hljs-attr\">spec:</span>\n  <span class=\"hljs-attr\">template:</span>\n    <span class=\"hljs-attr\">spec:</span>\n      <span class=\"hljs-attr\">containers:</span>\n        <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">pi</span>\n          <span class=\"hljs-attr\">image:</span> <span class=\"hljs-string\">perl</span>\n          <span class=\"hljs-attr\">command:</span> <span class=\"hljs-string\">[\"perl\",</span>  <span class=\"hljs-string\">\"-Mbignum=bpi\"</span><span class=\"hljs-string\">,</span> <span class=\"hljs-string\">\"-wle\"</span><span class=\"hljs-string\">,</span> <span class=\"hljs-string\">\"print bpi(2000)\"</span><span class=\"hljs-string\">]</span>\n      <span class=\"hljs-attr\">restartPolicy:</span> <span class=\"hljs-string\">Never</span>\n  <span class=\"hljs-attr\">completionPolicy:</span>\n    <span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">Always</span>\n    <span class=\"hljs-attr\">ttlSecondsAfterFinished:</span> <span class=\"hljs-number\">30</span>\n</code></pre>\n<h3>SidecarSet</h3>\n<p>The yaml file below describes a SidecarSet that contains a sidecar container named <code>sidecar1</code></p>\n<pre><code class=\"language-yaml\"><span class=\"hljs-comment\"># sidecarset.yaml</span>\n<span class=\"hljs-attr\">apiVersion:</span> <span class=\"hljs-string\">apps.kruise.io/v1alpha1</span>\n<span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">SidecarSet</span>\n<span class=\"hljs-attr\">metadata:</span>\n  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">test-sidecarset</span>\n<span class=\"hljs-attr\">spec:</span>\n  <span class=\"hljs-attr\">selector:</span> <span class=\"hljs-comment\"># select the pods to be injected with sidecar containers</span>\n    <span class=\"hljs-attr\">matchLabels:</span>\n      <span class=\"hljs-attr\">app:</span> <span class=\"hljs-string\">nginx</span>\n  <span class=\"hljs-attr\">containers:</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">sidecar1</span>\n    <span class=\"hljs-attr\">image:</span> <span class=\"hljs-string\">centos:7</span>\n    <span class=\"hljs-attr\">command:</span> <span class=\"hljs-string\">[\"sleep\",</span> <span class=\"hljs-string\">\"999d\"</span><span class=\"hljs-string\">]</span> <span class=\"hljs-comment\"># do nothing at all </span>\n</code></pre>\n",
  "link": "/en-us/docs/quick-start.html",
  "meta": {}
}